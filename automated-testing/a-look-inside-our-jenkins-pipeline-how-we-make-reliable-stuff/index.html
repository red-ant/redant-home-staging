<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="google-site-verification" content="uky3VJEeD3NAFHIK0V4KLdxlYF7fGGXJYyyt96LLe78" />
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>A look inside our Jenkins Pipeline - how we make reliable stuff | Red Ant</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="A look inside our Jenkins Pipeline - how we make reliable stuff" />
<meta name="author" content="Ben Still" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A quick outline of how we’re using Jenkins and the Pipeline view to visualise where our builds are up to" />
<meta property="og:description" content="A quick outline of how we’re using Jenkins and the Pipeline view to visualise where our builds are up to" />
<link rel="canonical" href="https://redant.com.au/automated-testing/a-look-inside-our-jenkins-pipeline-how-we-make-reliable-stuff/" />
<meta property="og:url" content="https://redant.com.au/automated-testing/a-look-inside-our-jenkins-pipeline-how-we-make-reliable-stuff/" />
<meta property="og:site_name" content="Red Ant" />
<meta property="og:image" content="https://redant.com.au/assets/uploads/2012/jenkins-pipeline-start.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-02-28T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://redant.com.au/assets/uploads/2012/jenkins-pipeline-start.png" />
<meta property="twitter:title" content="A look inside our Jenkins Pipeline - how we make reliable stuff" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ben Still"},"dateModified":"2012-02-28T00:00:00+00:00","datePublished":"2012-02-28T00:00:00+00:00","description":"A quick outline of how we’re using Jenkins and the Pipeline view to visualise where our builds are up to","headline":"A look inside our Jenkins Pipeline - how we make reliable stuff","image":"https://redant.com.au/assets/uploads/2012/jenkins-pipeline-start.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://redant.com.au/automated-testing/a-look-inside-our-jenkins-pipeline-how-we-make-reliable-stuff/"},"url":"https://redant.com.au/automated-testing/a-look-inside-our-jenkins-pipeline-how-we-make-reliable-stuff/"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="icon" href="/assets/images/favicon.ico" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" />
  <link rel="stylesheet" href="/assets/bundle/application.css" />
  <script src="/assets/bundle/application.js"></script>
  <script src="https://kit.fontawesome.com/c0cec62a8d.js" crossorigin="anonymous"></script>
  <script>
    if (!(window.fetch && window.Promise && [].includes && Object.assign && window.Map)) {
      document.write('<script src="https://cdn.polyfill.io/v3/polyfill.min.js?features=default,fetch"></scr'+'ipt>')
    }
  </script>
  
    <style>.async-hide { opacity: 0 !important} </style>

<script>
  var gtmId = window.location.host.includes("redant.com.au")
    ? "GTM-P7QNBDH"
    : "GTM-N3CM249";

  // Google Optimize page hiding snippet
  (function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;
  h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
  (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);
  })(window,document.documentElement,'async-hide','dataLayer',500,{[gtmId]:true});

  // Google Tag Manager
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',gtmId);
</script>

  
</head>

  <body class="">
    <div class="main-layout">
      <div
  data-controller="nav reveal normalise-height"
  data-reveal-hidden-class="open"
  data-action="normalise:height->nav#setHeight">
  <div class="nav-container" data-normalise-height-target="item">
    
      <div class="bg-dark text-white text-center p-2">
        <strong>A new way of working with us!</strong>
        Low monthly fixed cost. Access our team on demand to help you scale.
        <a href="/on-demand/" class="fw-bold ms-2">More info</a>
      </div>
    
    
    <nav class="navbar nav-overlay" data-reveal-target="item">
    
      <div class="container">
        <div class="d-flex flex-column">
          <div class="d-flex justify-content-between">
            <a href="/" class="navbar-brand">
              <img
                class="logo"
                src="/assets/images/logo.svg"
                alt="Red Ant logo"
              />
            </a>
            <div class="d-flex justify-content-end align-items-center w-100">
              <div class="d-none d-lg-block">
                <ul class="nav justify-content-end">
                  <li class="nav-item">
                    <a href="/get-started/" data-nav-target="item" class="nav-link">
                      Get started
                    </a>
                  </li>
                  
                  <li class="nav-item">
                    <a href="/on-demand/" data-nav-target="item" class="nav-link">
                      On Demand
                    </a>
                  </li>
                  
                  <li class="nav-item">
                    <a href="/about/" data-nav-target="item" class="nav-link">
                      About us
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="/portfolio/" data-nav-target="item" class="nav-link">
                      Portfolio
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="/technology/" data-nav-target="item" class="nav-link">
                      Technology
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="/blog/" data-nav-target="item" class="nav-link">Blog</a>
                  </li>
                  <li class="nav-item">
                    <a href="/contact-us/" data-nav-target="item" class="nav-link">
                      Contact
                    </a>
                  </li>
                </ul>
              </div>
              <button
                type="button"
                class="btn btn-link d-block d-lg-none nav-toggle-icon"
                data-action="click->reveal#toggle">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="container nav-links mx-4 mx-md-auto">
        <ul class="links">
          <li>
            <a href="/" data-nav-target="item">Home</a>
          </li>
          <li>
            <a href="/get-started/" data-nav-target="item">Get started</a>
          </li>
          
          <li>
            <a href="/on-demand/" data-nav-target="item">On Demand</a>
          </li>
          
          <li>
            <a href="/about/" data-nav-target="item">About us</a>
          </li>
          <li>
            <a href="/portfolio/" data-nav-target="item">Portfolio</a>
          </li>
          <li>
            <a href="/technology/" data-nav-target="item">Technology</a>
          </li>
          <li>
            <a href="/blog/" data-nav-target="item">Blog</a>
          </li>
          <li>
            <a href="/contact-us/" data-nav-target="item">Contact</a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</div>

      <section class="post-content pt-3 pb-5 text-md">
        <div class="container">
          <div class="row mb-sm-4">
            <div class="col-12">
              <div class="mb-3 pb-sm-5"><div id="breadcrumbs" class="text-capitalize mt-sm-5">
  
  <a href="/">Home</a>
    /
  <a
    href="/automated-testing/"
    >Automated testing</a
  >
     / A look inside our jenkins pipeline how we make reliable stuff  
</div>
</div>
              <h1 class="pb-2">A look inside our Jenkins Pipeline - how we make reliable stuff</h1>
              <hr class="dash" />
            </div>
          </div>
          <div class="row">
            <div class="col-md-8 order-2 order-sm-1">
              <img
                class="img-fluid mb-4"
                src="/assets/uploads/2012/jenkins-pipeline-start.png"
                alt="A look inside our Jenkins Pipeline - how we make reliable stuff"
              />
              <p>It works like this: all of our team our beavering away making stuff. As soon as a developer finishes working on something, they commit their work to Github (which is where we save our work). The gotcha is that sometimes that thing they were working on then breaks someone else’s code. Or something which was working is no longer working as planned. Ideally wed like to find out about this as soon as possible.</p>

<p>Jenkins sees a change has been made, and then grabs that version of the project, builds a completely new version of the site and content, and then starts running some automated tests. These tests make sure that each of the parts of the project work properly. Once everything passes, it gets a green light and Jenkins publishes this version of the code to a server (so us humans can take a look).</p>

<p>The big advantage to using a CI server like Jenkins is that any change gets tested immediately. We don’t rely on a human to test these, as (lets be honest here) they can be a bit unreliable. They get sick, they get distracted, they skip steps in testing, and they complain when asked to do boring tasks like check the same thing again and again and again. Jenkins on the other hand is always there, happily running in the background.</p>

<p>What can be tricky is understanding exactly where Jenkins is up to. Has the build just started, or is the testing almost complete? Is my change being tested now or is it sitting in a queue? Often several different changes are made by several developers at once, so it is useful to know which is getting tested and if it broke, where. This is where the <strong>Pipeline</strong> comes in - particularly when there are 3 or 4 anxious developers all trying to get their work through to Production.</p>

<h2 id="jenkins-pipeline">Jenkins Pipeline</h2>

<p>The <strong>Jenkins Pipeline</strong> gives us an overview of where these tests are up to. We have a development and a master Jenkins Pipeline. Development is for releases to the development branch, and these get pushed to a Dev server. Master is the master branch, and is for all of our <a href="/ruby-on-rails-devops/how-a-project-gets-tested-and-deployed-with-gitflow/">hotfixes</a> and tested releases. This gets pushed to UAT and then finally Production. All of this might sound like a bit of a cumbersome process with many steps (you might have worked with developers who say hey- I don’t need to test my stuff. I made it so I know it is Awesome!). But in this everything is completely automated so it needs very little effort- all a developer needs to do is commit a change to kick it all off. The upside is that we can have a high degree of confidence that everything works as planned.</p>

<h2 id="what-the-jenkins-pipeline-looks-like">What the Jenkins Pipeline looks like</h2>

<p>This is what the Jenkins Pipeline looks like when there are no tests running for our <a href="/portfolio/12wbt/">Michelle Bridges 12WBT project</a>. Each row is a build that relates directly to a commit, and the columns are steps in the process. Green is good, and it means that test group has all passed. You can see in this screenshot that there was a build which failed the Cucumber tests (the big red box) earlier today, followed by another which then passed.</p>

<img src="/assets/uploads/2012/jenkins-pipeline-start.png" alt="Jenkins Pipeline before a build has been kicked off" height="442" width="610" />
<h2 id="step-1-rspec">Step 1: rspec</h2>

<img src="/assets/uploads/2012/jenkins-pipeline-rspec.png" alt="Jenkins Pipeline showing RSpec test running" height="111" width="610" />
<p>This is what the pipeline looks like when Ive just kicked off a build. A new row appears for my test. Everything goes blue and the active step is yellow. The Rspec tests are the various code tests which check to see if specific functionality is working.</p>

<h2 id="step-2-cucumber">Step 2: cucumber</h2>

<img src="/assets/uploads/2012/jenkins-pipeline-cucumber.png" alt="Jenkins Pipeline showing Cucumber test running" height="111" width="610" />
<p>Once the Rspec tests pass, that box turns green, and then the next step starts - in this case Cucumber. This is running through all of the Cucumber stories that we use to describe how different features work.</p>

<h2 id="step-3-metrics">Step 3: metrics</h2>

<img src="/assets/uploads/2012/jenkins-pipeline-metrics.png" alt="Pipeline showing MetricFu test running" height="111" width="610" />
<p>The Cucumber tests all get completed, and that box turns green. The next box is metrics, which we check with a set of tools called <a href="http://metric-fu.rubyforge.org/">MetricFu (MetricFu Ruby Gem)</a>. These run checks to test quality in the code- looking for telltale signs like two parts of code that do the exact same thing. While this might not be the final word on whether code is in fact good, we can pick up sudden spikes in complexity or a drop in code test coverage. We’ve also added in Breakman to check for security flaws.</p>

<h2 id="step-4-deploy--check">Step 4: deploy &amp; check</h2>

<img src="/assets/uploads/2012/jenkins-pipeline-deploy.png" alt="Jenkins Pipeline showing final post deploy test running" height="111" width="610" />
<p>Finally, the tested code is then deployed to the server using Capistrano. In this example (development pipeline) the version is pushed to our development server. There are a few checks that need to get done once everything is in place- for example a credit card payment process that relies on a 3rd party payment service. These are difficult to do inside the virtual environment of the CI server, so they get done on an actual server.</p>

<h2 id="step-5-all-green---release-the-pandas">Step 5: All green - release the Pandas</h2>

<img src="/assets/uploads/2012/jenkins-pipeline-end.png" alt="Jenkins Pipeline once a build is complete" height="111" width="610" />
<p>Once all the steps are done, everything goes green. You might notice that this screenshot of the Jenkins Pipeline has a different release number- that is because I am slow and Jenkins is fast. It started on another build before I had a chance to screenshot. I am learning to live with my various shortcomings and deficiencies.</p>

<p>Next steps are to keep on <a href="http://arrrrcamp.be/videos/2011/corey-haines—-fast-rails-tests/">improving our test times</a>, since the faster these tests can run the sooner we can publish changes. When were busy well occasionally get a backlog of changes, Jenkins becomes Jerkins and it can take a while for all of the builds to push through.</p>

<p>Overall, using Jenkins and the Pipeline view has been extremely useful. We get good visibility over where different builds are at, and what has failed where. Jenkins itself has helped us improve our process flow - particularly when used with <a href="/ruby-on-rails-devops/how-a-project-gets-tested-and-deployed-with-gitflow/">Gitflow</a></p>

            </div>
            <div class="col-md-4 order-1 order-sm-2">
              
              <div class="post-detail-container section-border">
                <p>A quick outline of how we're using Jenkins and the Pipeline view to visualise where our builds are up to</p>
              </div>
              
              
<div data-controller="modal-carousel">
  

  <div
    id="gallery-modal"
    class="modal fade"
    role="dialog"
    tabindex="-1"
    aria-labelledby="gallery-modal"
    aria-hidden="true"
    data-modal-carousel-target="modal">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-header">
        <button
          type="button"
          class="btn-close btn-close-white text-lg pe-auto"
          data-bs-dismiss="modal"
          aria-label="Close">
        </button>
      </div>
      <div class="modal-content">
        <div
          id="gallery-carousel"
          class="carousel slide"
          data-bs-ride="carousel"
          data-modal-carousel-target="carousel">
          <div class="carousel-inner">
            
          </div>
          <button
            type="button"
            class="carousel-control-prev"
            data-bs-target="#gallery-carousel"
            data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button
            type="button"
            class="carousel-control-next"
            data-bs-target="#gallery-carousel"
            data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

            </div>
          </div>
        </div>
      </section>
      <section class="pb-5 d-none d-sm-block">
        <div class="container" data-controller="fake-news"></div>
      </section>
      <footer class="footer py-5">
  <div class="container">
    <div class="row mb-4">
      <div class="col-6 col-lg-4 order-1">
        <p>
          <a href="mailto:info@redant.com.au">info@redant.com.au</a>
          <br>
          <a href="tel:+61292678300">+61 2 9267 8300</a>
          <br>
          <a href="/privacy-policy">Red Ant Privacy Policy</a>
        </p>
      </div>

      <div class="col-8 offset-2 col-md-12 offset-md-0 col-lg-4 order-3 order-lg-2">
        <p>
          <i class="fa fa-twitter"></i>
          <a href="https://twitter.com/r_e_d_a_n_t" target="_blank" class="ms-2">
            The most mundane Twitter, ever
          </a>
          <br>
          <i class="fa fa-linkedin-square"></i>
          <a href="https://www.linkedin.com/company/76862" target="_blank" class="ms-2">
            Stalk us on Linkedin
          </a>
        </p>
      </div>

      <div class="col-6 col-lg-4 order-2 order-lg-3">
        <p>
          PO Box 250, Vaucluse Sydney NSW 2030 Australia
          <br>
          ABN 87 081 223 252
        </p>
      </div>
    </div>

    <div class="row mb-4">
      <div class="col px-lg-5 text-center link-list">
        <a href="/jobs/" class="pri me-2">Careers</a>
        <span> | </span>
        <a href="/blog/" class="mx-2">Blog</a>
        <span> | </span>
        <a href="/automated-testing/" class="mx-2">Automated Testing</a>
        <span> | </span>
        <a href="/mobile/" class="mx-2">Mobile</a>
        <span> | </span>
        <a href="/software-development/" class="mx-2">Ruby Development</a>
        <span> | </span>
        <a href="/our-work/" class="mx-2">Our Work</a>
        <span> | </span>
        <a href="/red-ant-stuff/" class="mx-2">Red Ant</a>
        <span> | </span>
        <a href="/ruby-on-rails-devops/" class="mx-2">Devops</a>
        <span> | </span>
        <a href="/ruby-on-rails/" class="mx-2">Ruby on Rails developer</a>
        <span> | </span>
        <a href="/strategy/" class="mx-2">Strategy</a>
        <span> | </span>
        <a href="/our-work/" class="mx-2">Work updates</a>
        <span> | </span>
        <a href="/tool-reviews/" class="mx-2">Tool Reviews</a>
        <span> | </span>
        <a href="/portfolio/" class="mx-2">Our Portfolio</a>
        <span> | </span>
        <a href="/about/" class="mx-2">About Red Ant</a>
      </div>
    </div>

    <div class="row">
      <div class="col text-center">
        &copy; Red Ant 2022
      </div>
    </div>
  </div>
</footer>

<script>
  window.intercomSettings = {
    api_base: "https://api-iam.intercom.io",
    app_id: "fd4z6tu3",
    custom_launcher_selector:'.intercom-launcher'
  };
</script>

<script>
  // We pre-filled your app ID in the widget URL: 'https://widget.intercom.io/widget/fd4z6tu3'
  (function () {
    var w = window;
    var ic = w.Intercom;
    if (typeof ic === "function") {
      ic("reattach_activator");
      ic("update", w.intercomSettings);
    } else {
      var d = document;
      var i = function () {
        i.c(arguments);
      };
      i.q = [];
      i.c = function (args) {
        i.q.push(args);
      };
      w.Intercom = i;
      var l = function () {
        var s = d.createElement("script");
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://widget.intercom.io/widget/fd4z6tu3";
        var x = d.getElementsByTagName("script")[0];
        x.parentNode.insertBefore(s, x);
      };
      if (document.readyState === "complete") {
        l();
      } else if (w.attachEvent) {
        w.attachEvent("onload", l);
      } else {
        w.addEventListener("load", l, false);
      }
    }
  })();
</script>

    </div>
  </body>
</html>
